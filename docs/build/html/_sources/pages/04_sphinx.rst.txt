Créer une documentation (Sphinx)
================================

Objectif
--------

L’objectif est de produire une **documentation technique en ligne**, claire et structurée,
directement liée au code du projet.

Cette documentation doit :
- être versionnée avec Git
- se mettre à jour automatiquement à chaque modification
- être consultable via un navigateur (GitHub Pages)

Pour cela, l’outil **Sphinx** a été utilisé.

Télécharger et installer Sphinx
-------------------------------

Sphinx est un générateur de documentation basé sur Python.
Il transforme des fichiers texte (reStructuredText) en pages HTML.

L’installation se fait via ``pip`` :

.. code-block:: bash

   python3 -m pip install sphinx

Problème rencontré (environnement Python)
------------------------------------------

Lors de l’installation, une erreur de type :

- ``externally-managed-environment``

est apparue.  
Cette erreur est liée à la gestion stricte des paquets Python par le système
(Debian / Ubuntu récents).

Solution adoptée
----------------

Au lieu d’installer des paquets Python système, la documentation est générée
localement sans modifier l’environnement global, ce qui évite de casser Python.

Sphinx étant déjà disponible sur la machine, la génération a pu être réalisée
sans forcer l’installation système.

Créer le site de documentation
------------------------------

La documentation est contenue dans le dossier ``docs/`` du dépôt Git.

Structure principale :

- ``docs/source/`` : fichiers source ``.rst``
- ``docs/build/`` : fichiers HTML générés (non versionnés)
- ``docs/Makefile`` : commandes de génération

Le fichier principal est :

- ``docs/source/index.rst``

Génération locale de la documentation
-------------------------------------

Pour générer la documentation en HTML localement :

.. code-block:: bash

   make -C docs html

Cette commande :
- lit les fichiers ``.rst`` dans ``docs/source``
- génère les pages HTML dans ``docs/build/html``

Les pages peuvent ensuite être ouvertes localement dans un navigateur
sans serveur web.

Erreurs rencontrées lors de la génération
-----------------------------------------

Plusieurs avertissements Sphinx sont apparus, notamment :

- documents référencés dans le ``toctree`` mais inexistants
- fichiers ``.rst`` sans titre principal

Exemple :

- ``toctree contains reference to nonexisting document``
- ``document doesn't have a title``

Ces erreurs ont permis de :
- détecter des pages manquantes
- structurer correctement chaque fichier ``.rst`` avec un titre

Ces avertissements n’empêchent pas la génération mais améliorent la qualité
de la documentation.

Déploiement automatique avec GitHub Pages
-----------------------------------------

La documentation est déployée automatiquement en ligne à chaque ``push``
grâce à **GitHub Actions** et **GitHub Pages**.

Principe :
- un workflow GitHub est déclenché à chaque push sur la branche principale
- la documentation est générée automatiquement
- les fichiers HTML sont publiés sur GitHub Pages

Cela permet :
- d’avoir une documentation toujours à jour
- de ne pas générer manuellement les fichiers HTML
- de lier directement documentation et version du code

Lien avec le projet
-------------------

La documentation centralise :
- l’explication du projet
- les choix techniques
- les tests
- l’organisation ROS2
- l’URDF et la visualisation

Elle constitue le support principal de compréhension du projet,
aussi bien pour les développeurs que pour l’évaluation.


