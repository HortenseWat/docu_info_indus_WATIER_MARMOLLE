URDF (Description mécanique du robot)
====================================

Objectif
--------

L’objectif de cette partie est de décrire la structure mécanique du pantographe
à l’aide d’un fichier **URDF** (Unified Robot Description Format).

L’URDF permet de :
- décrire les liens mécaniques (bras, base, etc.)
- définir les articulations (joints)
- fournir une base exploitable par ROS 2 et RViz

Dans ce projet, l’URDF est utilisé principalement pour :
- structurer la description mécanique
- préparer la visualisation
- garantir la cohérence entre mécanique et logiciel

Choix d’une représentation URDF
-------------------------------

Le pantographe est un **mécanisme à boucle fermée**.
Or, l’URDF impose une **structure en arbre** (pas de boucle cinématique directe).

Choix réalisé
^^^^^^^^^^^^^

Pour rester compatible avec ROS 2 et RViz, une **représentation arborescente équivalente**
a été utilisée :

- la boucle mécanique réelle n’est pas entièrement modélisée
- l’URDF représente une version simplifiée destinée à la visualisation
- la cinématique exacte est laissée à la logique de calcul (hors URDF)

Ce choix est volontaire et classique dans les projets ROS.

Structure du package de description
-----------------------------------

L’URDF est intégré dans le package ROS2 ``pantograph_description``.

Structure retenue :

- ``pantograph_description/urdf/`` : fichiers URDF
- ``pantograph_description/meshes/`` : fichiers Collada (``.dae``)

Cette organisation respecte les conventions ROS2 et facilite l’installation du package.

Fichier URDF
------------

Un fichier URDF a été créé pour décrire les principaux éléments du pantographe.

Contenu du fichier :
- un lien de base
- plusieurs liens représentant les bras du pantographe
- des joints de type ``revolute`` pour les articulations
- des références vers des meshes externes (format ``.dae``)

Exemple de structure de lien avec mesh :

.. code-block:: xml

   <link name="link1">
     <visual>
       <geometry>
         <mesh filename="package://pantograph_description/meshes/link1.dae"/>
       </geometry>
     </visual>
   </link>

Utilisation des meshes
----------------------

Les éléments mécaniques ont été exportés depuis le modèle CAO
au format **Collada (``.dae``)**.

Pourquoi ce format
^^^^^^^^^^^^^^^^^^

- format bien supporté par RViz
- permet de conserver la géométrie réelle
- compatible avec URDF

Les meshes sont stockés dans le dossier ``meshes/`` du package
et référencés dans l’URDF via le préfixe ``package://``.

Problèmes rencontrés
--------------------

Plusieurs difficultés classiques ont été rencontrées lors de l’intégration URDF :

- affichage incomplet ou absent dans RViz
- difficulté à identifier si l’URDF était bien chargé
- différences entre structure mécanique réelle et structure URDF autorisée

Ces problèmes n’empêchent pas la création de l’URDF,
mais nécessitent des ajustements progressifs.

Vérification de l’URDF
---------------------

Même sans affichage parfait, plusieurs vérifications ont été effectuées :

- le fichier URDF est bien présent dans le package
- il est correctement chargé par ``robot_state_publisher``
- des frames sont publiées (TF statique observable)

Cela confirme que :
- la structure URDF est valide
- ROS2 peut exploiter le fichier sans erreur bloquante

Lien avec la suite du projet
----------------------------

L’URDF constitue une base pour :
- la visualisation dans RViz
- la compréhension de la structure mécanique
- l’intégration future avec des nœuds ROS2

L’amélioration de la visualisation (axes, échelle, détails des joints)
est identifiée comme une **piste d’amélioration**, mais n’est pas bloquante
pour la validation du projet.
